workflow,node,description,type,next_node,error_node,input_fields,output_field,prompt,context
ExpenseValidation,LoadExpenses,Load expense data from CSV,csv_reader,ValidateExpenses,ErrorHandler,,expense_data,data/sample_expenses.csv,"{""format"": ""records""}"
ExpenseValidation,ValidateExpenses,Custom validation with business rules,expense_validator,CategorizeExpenses,ErrorHandler,expense_data,validation_results,,"{""max_amount"": 1000, ""required_fields"": [""amount"", ""description"", ""date""], ""allowed_categories"": [""Travel"", ""Office"", ""Meals"", ""Equipment"", ""Software""]}"
ExpenseValidation,CategorizeExpenses,AI-powered expense categorization,llm,GenerateReport,ErrorHandler,validation_results,categorized_expenses,"You are an expert financial analyst. Categorize each expense into one of these categories: Travel, Office, Meals, Equipment, Software, or Other.

For each expense, also determine if it seems reasonable for a business expense and flag any that seem suspicious.

Expenses to categorize: {validation_results}

Return a JSON array with this format:
[
  {
    ""original_expense"": ""[expense description]"",
    ""amount"": [amount],
    ""suggested_category"": ""[category]"",
    ""confidence"": [0.0-1.0],
    ""suspicious"": [true/false],
    ""reason"": ""[explanation for categorization/flags]""
  }
]","{""provider"": ""anthropic"", ""model"": ""claude-3-sonnet-20240229"", ""temperature"": 0.2}"
ExpenseValidation,GenerateReport,Generate validation summary report,echo,SaveReport,ErrorHandler,categorized_expenses,final_report,"üìä **EXPENSE VALIDATION REPORT**

{categorized_expenses}

‚úÖ **Validation Complete**: All expenses have been processed through custom business rules and AI categorization.

üìÅ **Next Steps**: 
1. Review flagged expenses for policy compliance
2. Approve categorizations or make adjustments
3. Submit for final approval",
ExpenseValidation,SaveReport,Save validation report to file,file_writer,End,ErrorHandler,final_report,save_result,data/validation_report.txt,"{""mode"": ""write""}"
ExpenseValidation,ErrorHandler,Handle validation errors,echo,End,,error,error_message,‚ùå **Validation Error**: {error},
ExpenseValidation,End,Workflow complete,echo,,,save_result,completion,‚ú® Expense validation workflow completed!,